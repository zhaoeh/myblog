---
layout:     post
title:      AOP
subtitle:   AOP
categories: [gpt]
mermaid: false
sequence: false
flow: false
mathjax: false
mindmap: false
mindmap2: false
---

# 1. aop的proceed如果有参数，它怎么执行？
在使用AspectJ或Spring AOP时，如果切面方法（Advice）中的 `proceed` 方法需要传递参数，你可以使用 `ProceedingJoinPoint` 类来获取方法参数并调用目标方法。下面是一个简单的示例来说明这个过程：

```java
import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;
import org.springframework.stereotype.Component;

@Aspect
@Component
public class MyAspect {

    @Around("execution(* com.example.service.MyService.myMethod(..))")
    public Object aroundAdvice(ProceedingJoinPoint joinPoint) throws Throwable {
        // 获取方法参数
        Object[] args = joinPoint.getArgs();

        // 修改参数值
        args[0] = "Modified Argument";

        // 调用目标方法，并获取返回值
        Object result = joinPoint.proceed(args);

        return result;
    }
}
```

在上面的示例中，`aroundAdvice` 方法使用 `@Around` 注解表示它是一个环绕通知（Around Advice）。通过 `ProceedingJoinPoint` 类的 `getArgs()` 方法可以获取目标方法的参数，然后你可以根据需要修改这些参数的值。最后，使用 `proceed()` 方法调用目标方法，并获取其返回值。

需要注意的是，如果你修改了方法参数，确保参数的类型和顺序与目标方法的参数类型和顺序相匹配，否则可能会导致方法执行异常或不正确的结果。

